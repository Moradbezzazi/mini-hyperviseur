<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Orchestrateur Hyperviseur - Libvirt</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header>
    Orchestrateur Hyperviseur – Libvirt Supervision
  </header>

  <main>

    <!-- ===================== CONNEXION ===================== -->
    <div class="section">
      <h2>Connexion</h2>
      <div class="form-inline">
        <label>URI :</label>
        <input type="text" id="uri" value="qemu:///system">
        <button onclick="chargerVMs()">Actualiser les VMs</button>
      </div>
    </div>

    <!-- ===================== BOUTON CREATION VM ===================== -->
    <div class="section">
      <button class="btn-create" onclick="openCreateVM()">➕ Créer une VM</button>
    </div>

    <!-- ===================== POPUP CREATION VM ===================== -->
    <div id="createVMModal" class="modal">
      <div class="modal-content">

        <span class="close" onclick="closeCreateVM()">&times;</span>
        <h2>Créer une nouvelle machine virtuelle</h2>

        <label>Nom de la VM :</label>
        <input type="text" id="vmNamePopup">

        <label>Mémoire RAM (MiB) :</label>
        <input type="number" id="vmRAM" value="2048" min="256">

        <label>CPU (vCPU) :</label>
        <input type="number" id="vmCPU" value="2" min="1">

        <label>Taille du disque (GB) :</label>
        <input type="number" id="vmDisk" value="20" min="1">
        
        <label>Image ISO (sur le serveur) :</label>
        <select id="vmISO"></select>
        
        <label>Type de système d’exploitation :</label>
        <select id="vmOS">
          <option value="debian12">Debian 13 (utilise debian12)</option>
          <option value="ubuntu22.04">Ubuntu 22.04</option>
          <option value="ubuntu24.04">Ubuntu 24.04</option>
          <option value="linux2022">Linux générique (fallback)</option>
        </select>

        <button class="btn-confirm" onclick="submitCreateVM()">Créer la VM</button>
      </div>
    </div>

    <!-- ===================== VM LISTS ===================== -->
    <div class="section">
      <h2>Machines Virtuelles</h2>

      <h3 style="color:var(--success)">Actives</h3>
      <div id="active" class="grid"></div>

      <h3 style="color:var(--gray)">Inactives</h3>
      <div id="inactive" class="grid"></div>
    </div>

  </main>

  <footer>
    © 2025 Orchestrateur Libvirt – Interface Flask + C
  </footer>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
